(()=>{let e={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Agu","09":"Sep",10:"Oct",11:"Nov",12:"Dec"},t=[],n=document.getElementById("addObjective"),l=document.getElementById("newName"),d=document.getElementById("newDate"),c=document.getElementById("newDuration"),o=document.querySelectorAll(".priority"),a=document.getElementById("projectSelector"),i=document.getElementById("projectList"),r=document.querySelectorAll(".project"),s=document.getElementById("mainDisplay");for(let e of r){let t=document.createElement("option");t.innerText=e.innerText,a.appendChild(t)}let u=document.getElementById("objTable");n.addEventListener("click",(function(){let n={title:l.value,project:a.value,dueDate:d.value,duration:c.value,priority:"unselected",notes:"notes*",checklist:"checklist*"};t.push(n);let i=document.createElement("tr");i.classList.add("objectives");let r=document.createElement("td"),p=document.createElement("input");i.appendChild(r),r.appendChild(p),p.setAttribute("type","checkbox");let v=document.createElement("td");v.innerText=n.title,i.appendChild(v);let L=document.createElement("td");n.dueDate?L.innerText=`${n.dueDate.split("-")[2]} ${e[n.dueDate.split("-")[1]]}`:L.innerText="",i.appendChild(L);let g=document.createElement("td");switch(g.innerText=n.duration,i.appendChild(g),u.appendChild(i),o.forEach((e=>{e.checked&&(n.priority=e.id.slice(0,-3))})),n.priority){case"low":v.style="color:green",L.style="color:green",g.style="color:green";break;case"normal":v.style="color:black",L.style="color:black",g.style="color:black";break;case"high":v.style="color:red",L.style="color:red",g.style="color:red"}i.classList.add(a.value.replaceAll(" ","_")),i.classList.add(function(){let e=new Date(d.value).getFullYear(),t=new Date(d.value).getMonth()+1,n=new Date(d.value).getDate();if(e==m&&t==y&&n==E)return"today";{const e=new Date(d.value).getTime()-(new Date).getTime(),t=Math.ceil(e/864e5);return 1==t?"tomorrow":t>1?"planned":new Date(d.value)<new Date?"late":"undated"}}()),console.log(i),document.querySelectorAll(".projectGroups").forEach((e=>{e.addEventListener("click",(function(){document.querySelectorAll(".objectives").forEach((t=>{t.classList.contains(`${e.innerText.replaceAll(" ","_")}`)?t.classList.remove("hidden"):t.classList.add("hidden"),h(),s.innerText=e.innerText}))}))})),h()})),document.getElementById("addProject").addEventListener("click",(function(){document.getElementById("addProjectForm").style.zIndex="9"})),document.getElementById("closeButton").addEventListener("click",(function(){document.getElementById("addProjectForm").style.zIndex="-1"})),document.getElementById("addButton").addEventListener("click",(function(){let e=document.getElementById("addProjectName"),t=document.createElement("li");t.classList.add("project");let n=document.createElement("button");n.classList.add("projectGroups"),n.innerText=e.value,i.appendChild(t),t.appendChild(n);let l=document.createElement("option");l.innerText=e.value,a.appendChild(l),e.value=""}));let m=(new Date).getFullYear(),y=(new Date).getMonth()+1,E=(new Date).getDate();function p(){let e,t=document.getElementById("today"),n=document.getElementById("tomorrow"),l=document.getElementById("planned"),d=document.getElementById("late"),c=document.getElementById("undated"),o=document.getElementById("all");t.addEventListener("click",(function(){e=document.querySelectorAll(".objectives"),e.forEach((e=>{e.classList.contains("today")?e.classList.remove("hidden"):e.classList.add("hidden"),h(),s.innerText="Today"}))})),n.addEventListener("click",(function(){e=document.querySelectorAll(".objectives"),e.forEach((e=>{e.classList.contains("tomorrow")?e.classList.remove("hidden"):e.classList.add("hidden"),h(),s.innerText="Tomorrow"}))})),l.addEventListener("click",(function(){e=document.querySelectorAll(".objectives"),e.forEach((e=>{e.classList.contains("planned")?e.classList.remove("hidden"):e.classList.add("hidden"),h(),s.innerText="Planned"}))})),d.addEventListener("click",(function(){e=document.querySelectorAll(".objectives"),e.forEach((e=>{e.classList.contains("late")?e.classList.remove("hidden"):e.classList.add("hidden"),h(),s.innerText="Late"}))})),c.addEventListener("click",(function(){e=document.querySelectorAll(".objectives"),e.forEach((e=>{e.classList.contains("undated")?e.classList.remove("hidden"):e.classList.add("hidden"),h(),s.innerText="Undated"}))})),o.addEventListener("click",(function(){e=document.querySelectorAll(".objectives"),e.forEach((e=>e.classList.remove("hidden"))),h(),s.innerText="All Time"}))}function h(){let e=document.querySelectorAll(".objectives:not(.hidden)");document.getElementById("objectiveDisplay").innerHTML=`${e.length} projects`;let t=0;e.forEach((e=>{let n=e.lastElementChild;if(n.innerText){let e=n.innerText.split(":"),l=60*Number(e[0])+Number(e[1]);t+=l}})),document.getElementById("timeDisplay").innerText=`${Math.floor(t/60)}h${t%60}min`}p(),p(),h()})();