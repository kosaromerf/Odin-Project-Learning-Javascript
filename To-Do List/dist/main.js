(()=>{"use strict";let e={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Agu","09":"Sep",10:"Oct",11:"Nov",12:"Dec"},t=[];function n(e){t.includes(e)||t.push(e);let n=document.createElement("li");n.classList.add("project");let l=document.createElement("button");l.classList.add("projectGroups"),l.innerText=e,document.getElementById("projectList").appendChild(n),n.appendChild(l),localStorage.setItem("projects",JSON.stringify(t));let c=document.createElement("option");c.innerText=e,document.getElementById("projectSelector").appendChild(c)}function l(){document.querySelectorAll(".projectGroups").forEach((e=>{e.addEventListener("click",(function(){document.querySelectorAll(".objectives").forEach((t=>{t.classList.contains(`${e.innerText.replaceAll(" ","_")}`)?t.classList.remove("hidden"):t.classList.add("hidden"),document.getElementById("mainDisplay").innerText=e.innerText}))}))}))}function c(){document.querySelectorAll(".timeGroups").forEach((e=>e.addEventListener("click",(function(){document.querySelectorAll(".objectives").forEach((t=>{t.classList.contains(e.id)?t.classList.remove("hidden"):t.classList.add("hidden"),document.getElementById("mainDisplay").innerText=e.innerText}))})))),document.getElementById("all").addEventListener("click",(function(){document.querySelectorAll(".objectives").forEach((e=>e.classList.remove("hidden"))),document.getElementById("mainDisplay").innerText="All Time"}))}function d(){document.getElementById("objectiveDisplay").innerHTML=`${document.querySelectorAll(".objectives:not(.hidden.finished)").length} projects`;let e=0;document.querySelectorAll(".objectives:not(.hidden.finished)").forEach((t=>{let n=t.lastElementChild;if(n.innerText){let t=n.innerText.split(":");e+=60*Number(t[0])+Number(t[1])}})),document.getElementById("timeDisplay").innerText=`${Math.floor(e/60)}h${e%60}min`}let i=[];function o(t){let n=document.createElement("tr"),o=document.createElement("td"),r=document.createElement("input"),s=document.createElement("td"),u=document.createElement("td"),m=document.createElement("td");switch(n.appendChild(o),o.appendChild(r),r.setAttribute("type","checkbox"),r.checked=t.checklist,n.appendChild(s),n.appendChild(u),n.appendChild(m),document.getElementById("objTable").appendChild(n),n.classList.add("objectives"),i.includes(t)?n.classList.add(t.project.replaceAll(" ","_")):(i.push(t),n.classList.add(document.getElementById("projectSelector").value.replaceAll(" ","_"))),n.classList.add(document.getElementById("projectSelector").value.replaceAll(" ","_")),n.classList.add(function(){let e=document.getElementById("newDate"),t=(new Date).getFullYear(),n=(new Date).getMonth()+1,l=(new Date).getDate(),c=new Date(e.value).getFullYear(),d=new Date(e.value).getMonth()+1,i=new Date(e.value).getDate();if(c==t&&d==n&&i==l)return"today";{const t=new Date(e.value).getTime()-(new Date).getTime(),n=Math.ceil(t/864e5);return 1==n?"tomorrow":n>1?"planned":new Date(e.value)<new Date?"late":"undated"}}()),t.dueDate?u.innerText=`${t.dueDate.split("-")[2]} ${e[t.dueDate.split("-")[1]]}`:u.innerText="",s.innerText=t.title,m.innerText=t.duration,t.priority){case"low":s.style="color:green",u.style="color:green",m.style="color:green";break;case"normal":s.style="color:black",u.style="color:black",m.style="color:black";break;case"high":s.style="color:red",u.style="color:red",m.style="color:red"}r.checked=t.checklist,a(n,r,s,u,m),d(),o.addEventListener("click",(function(){a(n,r,s,u,m),t.checklist?t.checklist=!1:t.checklist=!0,d(),localStorage.setItem("objectives",JSON.stringify(i))})),c(),l(),d(),s.addEventListener("click",(function(){!function(e,t){let n=document.createElement("div");n.classList.add("notes");let l=document.createElement("h4");l.innerText="Additinal Notes";let c=document.createElement("textarea");c.value=e.notes;let o=document.createElement("div");o.setAttribute("id","buttons");let a=document.createElement("button");a.setAttribute("id","update"),a.innerText="Update";let r=document.createElement("button");r.setAttribute("id","del"),r.innerText="Delete";let s=document.createElement("button");s.setAttribute("id","close"),s.innerText="Close",n.appendChild(l),n.appendChild(c),n.appendChild(o),o.appendChild(a),o.appendChild(s),o.appendChild(r),document.getElementById("body").appendChild(n),a.addEventListener("click",(function(){e.notes=c.value,localStorage.setItem("objectives",JSON.stringify(i))})),r.addEventListener("click",(function(){i=i.filter((t=>t!==e)),t.remove(),n.style.display="none",localStorage.setItem("objectives",JSON.stringify(i)),d()})),s.addEventListener("click",(function(){n.style.display="none"}))}(t,n)}))}function a(e,t,n,l,c){t.checked?(e.classList.add("finished"),n.classList.add("finished"),l.classList.add("finished"),c.classList.add("finished")):(e.classList.remove("finished"),n.classList.remove("finished"),l.classList.remove("finished"),c.classList.remove("finished")),d()}document.querySelectorAll(".project").forEach((e=>{document.getElementById("projectSelector").appendChild(document.createElement("option")).innerText=e.innerText})),c(),l(),d(),document.getElementById("addProject").addEventListener("click",(function(){document.getElementById("addProjectForm").style.zIndex="9"})),document.getElementById("closeButton").addEventListener("click",(function(){document.getElementById("addProjectForm").style.zIndex="-1"})),document.getElementById("addButton").addEventListener("click",(function(){n(document.getElementById("addProjectName").value)})),document.querySelectorAll(".categoryBtn").forEach((e=>e.addEventListener("click",d))),document.getElementById("addObjective").addEventListener("click",(function(){o({title:document.getElementById("newName").value,project:document.getElementById("projectSelector").value,dueDate:document.getElementById("newDate").value,duration:document.getElementById("newDuration").value,priority:document.querySelector('input[name="priority"]:checked').id.slice(0,-3),notes:"notes",checklist:!1}),localStorage.setItem("projects",JSON.stringify(t)),localStorage.setItem("objectives",JSON.stringify(i))}));let r=localStorage.getItem("projects"),s=localStorage.getItem("objectives");r&&(t=JSON.parse(r),t.forEach((e=>{n(e)})),l()),s&&(i=JSON.parse(s),i.forEach((e=>{o(e)})))})();